<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>CanteenOS ‚Äî Login</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="auth-wrap">
    <div class="auth-card card">
      <h2 class="headline center">üçΩÔ∏è RMLCanteen ‚Äî Login</h2>

      <label class="input-label">Email</label>
      <input type="email" id="loginEmail" placeholder="you@example.com" required>

      <label class="input-label">Password</label>
      <div class="password-row">
        <input type="password" id="loginPass" placeholder="Password" required>
        <button class="btn small" type="button" onclick="togglePassword('loginPass')">üëÅÔ∏è</button>
      </div>

      <button class="btn mt-8" onclick="handleLogin()">Login</button>

      <p class="center mt-8 muted">
        Don't have an account? <a href="register.html" class="link">Register</a>
      </p>
    </div>
  </div>

  <script src="script.js"></script>
  <script>
    // if already logged in -> redirect to appropriate page
    (function(){
      const cur = getCurrent();
      if(cur && cur.role === 'admin') location.href='admin.html';
      if(cur && cur.role === 'user') location.href='order.html';
    })();

    function togglePassword(id){
      const el = document.getElementById(id);
      el.type = el.type === 'password' ? 'text' : 'password';
    }

    function handleLogin(){
      // delegates to script.js login function
      loginUser();
    }
  </script>
</body>
</html>
